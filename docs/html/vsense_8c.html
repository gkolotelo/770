<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ES770: /mnt/d/Users/guilherme/Documents/University/Current Semester/ES770/workspace/implementation/Sources/hal/vsense/vsense.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ES770
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_079cb771efd57f82be1fa1a5f33c7d4a.html">workspace</a></li><li class="navelem"><a class="el" href="dir_3ada556fdc830aea50518fab5b2ef00f.html">implementation</a></li><li class="navelem"><a class="el" href="dir_6992dc40ea789ad5a1ac403e9ed15317.html">Sources</a></li><li class="navelem"><a class="el" href="dir_717d4505efffe7e61398ac259b8458a8.html">hal</a></li><li class="navelem"><a class="el" href="dir_d3a74d954eb6cde3780d91edbf1a38ee.html">vsense</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vsense.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>File containing the methods for interacting with for interacting with the sense resistors.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;MKL25Z4.h&gt;</code><br/>
<code>#include &quot;fsl_clock_manager.h&quot;</code><br/>
<code>#include &quot;fsl_gpio_driver.h&quot;</code><br/>
<code>#include &quot;fsl_gpio_hal.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="vsense_8h_source.html">vsense.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="target__definitions_8h_source.html">hal/target_definitions.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="adc_8h_source.html">hal/adc/adc.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="util_8h_source.html">hal/util/util.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad5b830c2bbebb30c03fbbec26b5b5a82"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad5b830c2bbebb30c03fbbec26b5b5a82"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsense_8c.html#ad5b830c2bbebb30c03fbbec26b5b5a82">vsense_initVsense</a> ()</td></tr>
<tr class="memdesc:ad5b830c2bbebb30c03fbbec26b5b5a82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up pin configuration for voltage sense. <br/></td></tr>
<tr class="separator:ad5b830c2bbebb30c03fbbec26b5b5a82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79e9cf80d0c0a46f3867de25d7ac7d6f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsense_8c.html#a79e9cf80d0c0a46f3867de25d7ac7d6f">vsense_getRawV1</a> ()</td></tr>
<tr class="memdesc:a79e9cf80d0c0a46f3867de25d7ac7d6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns raw ADC reading from VSense1 pin.  <a href="#a79e9cf80d0c0a46f3867de25d7ac7d6f">More...</a><br/></td></tr>
<tr class="separator:a79e9cf80d0c0a46f3867de25d7ac7d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff36aac1b82c201cf5c9199445d4c891"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsense_8c.html#aff36aac1b82c201cf5c9199445d4c891">vsense_getRawV2</a> ()</td></tr>
<tr class="memdesc:aff36aac1b82c201cf5c9199445d4c891"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns raw ADC reading from VSense2 pin.  <a href="#aff36aac1b82c201cf5c9199445d4c891">More...</a><br/></td></tr>
<tr class="separator:aff36aac1b82c201cf5c9199445d4c891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a333080413b5294132f0207762cf1455f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsense_8c.html#a333080413b5294132f0207762cf1455f">vsense_getV1</a> ()</td></tr>
<tr class="memdesc:a333080413b5294132f0207762cf1455f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns voltage reading from VSense1 pin.  <a href="#a333080413b5294132f0207762cf1455f">More...</a><br/></td></tr>
<tr class="separator:a333080413b5294132f0207762cf1455f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89fd85142a6df5224bd4d4da51623183"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsense_8c.html#a89fd85142a6df5224bd4d4da51623183">vsense_getV2</a> ()</td></tr>
<tr class="memdesc:a89fd85142a6df5224bd4d4da51623183"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns voltage reading from VSense2 pin.  <a href="#a89fd85142a6df5224bd4d4da51623183">More...</a><br/></td></tr>
<tr class="separator:a89fd85142a6df5224bd4d4da51623183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac216a594bfab6cfeab5a9d815cee3070"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsense_8c.html#ac216a594bfab6cfeab5a9d815cee3070">vsense_getSystemVoltage</a> ()</td></tr>
<tr class="memdesc:ac216a594bfab6cfeab5a9d815cee3070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns system voltage the Vsense1 pin. Same as getV1().  <a href="#ac216a594bfab6cfeab5a9d815cee3070">More...</a><br/></td></tr>
<tr class="separator:ac216a594bfab6cfeab5a9d815cee3070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf634a5650f7004291433a44ea596199"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsense_8c.html#aaf634a5650f7004291433a44ea596199">vsense_getCurrent</a> ()</td></tr>
<tr class="memdesc:aaf634a5650f7004291433a44ea596199"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns system current in mA.  <a href="#aaf634a5650f7004291433a44ea596199">More...</a><br/></td></tr>
<tr class="separator:aaf634a5650f7004291433a44ea596199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9dcc8672a400658a9b09f8dac4c3870"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vsense_8c.html#af9dcc8672a400658a9b09f8dac4c3870">vsense_getPower</a> ()</td></tr>
<tr class="memdesc:af9dcc8672a400658a9b09f8dac4c3870"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns system power in mW.  <a href="#af9dcc8672a400658a9b09f8dac4c3870">More...</a><br/></td></tr>
<tr class="separator:af9dcc8672a400658a9b09f8dac4c3870"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File containing the methods for interacting with for interacting with the sense resistors. </p>
<dl class="section author"><dt>Author</dt><dd>Guilherme Kairalla Kolotelo </dd>
<dd>
Bruno de Souza Ferreira </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>30 Sep 2016 </dd>
<dd>
07 Oct 2016</dd></dl>
<p>Vsense systems utilizes two resistor divider networks to convert the battery voltage (vesense1) and sense resistor voltage (vsense2) and acquire using the ADC. The battery voltage is used to set the the maximum PWM for the motor according to a user define maximum motor voltage. The voltage differential on the sense resistor allows computation of the system current and power usage at any given time. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aaf634a5650f7004291433a44ea596199"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vsense_getCurrent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns system current in mA. </p>
<dl class="section return"><dt>Returns</dt><dd>System current in mA. </dd></dl>

</div>
</div>
<a class="anchor" id="af9dcc8672a400658a9b09f8dac4c3870"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vsense_getPower </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns system power in mW. </p>
<dl class="section return"><dt>Returns</dt><dd>System power in mW. </dd></dl>

</div>
</div>
<a class="anchor" id="a79e9cf80d0c0a46f3867de25d7ac7d6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t vsense_getRawV1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns raw ADC reading from VSense1 pin. </p>
<dl class="section return"><dt>Returns</dt><dd>Raw ADC reading from VSense1 pin </dd></dl>

</div>
</div>
<a class="anchor" id="aff36aac1b82c201cf5c9199445d4c891"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t vsense_getRawV2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns raw ADC reading from VSense2 pin. </p>
<dl class="section return"><dt>Returns</dt><dd>Raw ADC reading from VSense2 pin </dd></dl>

</div>
</div>
<a class="anchor" id="ac216a594bfab6cfeab5a9d815cee3070"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vsense_getSystemVoltage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns system voltage the Vsense1 pin. Same as getV1(). </p>
<dl class="section return"><dt>Returns</dt><dd>System voltage reading. </dd></dl>

</div>
</div>
<a class="anchor" id="a333080413b5294132f0207762cf1455f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vsense_getV1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns voltage reading from VSense1 pin. </p>
<dl class="section return"><dt>Returns</dt><dd>Voltage reading from VSense1 pin </dd></dl>

</div>
</div>
<a class="anchor" id="a89fd85142a6df5224bd4d4da51623183"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float vsense_getV2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns voltage reading from VSense2 pin. </p>
<dl class="section return"><dt>Returns</dt><dd>Voltage reading from VSense2 pin. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 26 2016 01:49:44 for ES770 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
